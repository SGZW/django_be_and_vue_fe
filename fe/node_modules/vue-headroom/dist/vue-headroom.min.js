!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.vueHeadroom=t()}(this,function(){"use strict";function e(e){var t=e.currentScrollY>=e.lastScrollY?"down":"up",n=Math.abs(e.currentScrollY-e.lastScrollY);return e.currentScrollY<=e.pinStart&&"unfixed"!==e.state?"unfix":e.currentScrollY<=e.elemHeight&&"down"===t&&"unfixed"===e.state?"none":"down"===t&&["pinned","unfixed"].indexOf(e.state)>=0&&e.currentScrollY>e.elemHeight+e.pinStart&&n>e.downTolerance?"unpin":"up"===t&&n>e.upTolerance&&["pinned","unfixed"].indexOf(e.state)<0?"pin":"up"===t&&e.currentScrollY<=e.elemHeight&&["pinned","unfixed"].indexOf(e.state)<0?"pin":"none"}function t(){for(var e=document.createElement("div"),t=!1,n=["perspectiveProperty","WebkitPerspective"],i=n.length-1;i>=0;i--)t=t||void 0!==e.style[n[i]];if(t){var o=document.createElement("style");o.textContent="#modernizr{width:0;height:0} @media (transform-3d),(-webkit-transform-3d){#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",document.getElementsByTagName("head")[0].appendChild(o),e.id="modernizr",document.body.appendChild(e),t=7===e.offsetWidth&&18===e.offsetHeight,o.parentNode.removeChild(o),e.parentNode.removeChild(e)}return t}for(var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){(function(){var t,n,i,o,r,l;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-r)/1e6},n=process.hrtime,o=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),l=1e9*process.uptime(),r=o-l):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(n)}),o="undefined"==typeof window?n:window,r=["moz","webkit"],l="AnimationFrame",a=o["request"+l],s=o["cancel"+l]||o["cancelRequest"+l],d=0;!a&&d<r.length;d++)a=o[r[d]+"Request"+l],s=o[r[d]+"Cancel"+l]||o[r[d]+"CancelRequest"+l];if(!a||!s){var u=0,c=0,f=[];a=function(e){if(0===f.length){var t=i(),n=Math.max(0,1e3/60-(t-u));u=n+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return f.push({handle:++c,callback:e,cancelled:!1}),c},s=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}var p=function(e){return a.call(o,e)};p.cancel=function(){s.apply(o,arguments)},p.polyfill=function(){o.requestAnimationFrame=a,o.cancelAnimationFrame=s};var h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"headroom-wrapper",style:e.wrapperStyles},[n("div",{staticClass:"headroom",style:e.innerStyle},[e._t("default")],2)])},staticRenderFns:[],name:"vueHeadroom",data:function(){return{currentScrollY:0,lastScrollY:0,elemHeight:0,state:"",translate:0,isSupport3d:t()}},props:{disabled:{type:Boolean,default:!1},upTolerance:{type:Number,default:5},downTolerance:{type:Number,default:0},speed:{type:Number,default:250},easing:{type:String,default:"ease-in-out"},zIndex:{type:Number,default:9999},onPin:Function,onUnpin:Function,pinStart:{type:Number,default:0}},watch:{disabled:function(e){e?(this.unfix(),window.removeEventListener("scroll",this._handleScroll)):window.addEventListener("scroll",this._handleScroll)}},mounted:function(){this.elemHeight=this.$el.offsetHeight,this.disabled||window.addEventListener("scroll",this._handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this._handleScroll)},computed:{innerStyle:function(){return{position:this.isInTop?"fixed":"relative",top:"0",left:"0",right:"0","z-index":this.isInTop?this.zIndex:1,transform:this.isSupport3d?"translate3d(0, "+this.translate+", 0)":"translateY("+this.translate+")",transition:this.isInTop?"all "+this.speed+"ms "+this.easing:null}},wrapperStyles:function(){return{height:this.elemHeight?this.elemHeight+"px":null}},isInTop:function(){return"pinned"===this.state||"unpinned"===this.state}},methods:{_handleScroll:function(){p(this.update)},_getScrollY:function(){return void 0!==window.pageYOffset?window.pageYOffset:void 0!==window.scrollTop?window.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},update:function(){this.currentScrollY=this._getScrollY();var t=e(this);"pin"===t?this.pin():"unpin"===t?this.unpin():"unfix"===t&&this.unfix(),this.lastScrollY=this.currentScrollY},pin:function(){var e=this;this.$emit("fix"),this.onPin&&this.onPin(),this.translate=0,setTimeout(function(){e.state="pinned"},0)},unpin:function(){var e=this;this.$emit("fix"),this.onUnpin&&this.onUnpin(),this.translate="-100%",setTimeout(function(){e.state="unpinned"},0)},unfix:function(){this.$emit("unfix"),this.translate=0,this.state="unfixed"}}},m=function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.installed||t.component(h.name,h)};return"undefined"!=typeof window&&window.Vue&&m(window.Vue),{headroom:h,install:m}});
